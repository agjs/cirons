<!doctype html>
<html class="no-js" lang="en" ng-app="cirons">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Cirons</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" href="libs/bootstrap-css/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/css/cirons.css">
    </head>

    <body id="b">

        <aside class="menu blue">
            <header>
                <a href="#" class="logo">
                    <img src="assets/images/logo.png" alt="logo">
                </a>
            </header>
            <nav id="main">
                <ul class="nav nav-main">
                    <li>
                        <a href="#">
                            <i class="fa fa-user"></i>
                            <span>Link Title</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <div id="body">
            <header>
                <button id="speech" class="speech">
                    <i class="fa fa-microphone"></i>
                </button>
                <div class="page-title">
                    <h1>PageTitle</h1>
                </div>
                <div class="status-bar">
                    <div id="notifications_normal">
                        <button class="">
                            <i class="fa fa-bullhorn"></i>
                        </button>
                    </div>
                    <div id="notifications_reminder">
                        <button class="">
                            <i class="fa fa-bullhorn"></i>
                        </button>
                    </div>
                    <div id="notifications_urgent">
                        <button class="">
                            <i class="fa fa-bullhorn"></i>
                        </button>
                    </div>
                </div>
                <div class="user-bar">
                    <nav>
                        <span>
                            <img src="assets/images/noimage.png" />
                            <span>Philip Andersson</span>
                            <i class="fa fa-angle-down"></i>
                        </span>
                        <ul>
                            <li><a href="#"><i class="fa fa-cogs"></i> Edit Profile</a></li>
                            <li><a href="#"><i class="fa fa-lock"></i> Logout</a></li>
                        </ul>
                    </nav>

                </div>
            </header>

            <section id="content" class="has-sidebar hide-sidebar">
                <div class="inner">
                    <div class="page-content">
                        
                        <ui-view></ui-view>

                    </div>
                </div>

                <aside class="sidebar">
                    <div class="inner">
                        <a href="javascript:;" style="top: 130px;" class="sidebar-toggle">
                            <i class="fa fa-line-chart"></i>
                        </a>

                        <!-- gauges -->

                    </div>
                </aside>
            </section>
        </div>



        <script type="text/javascript">

            Number.prototype.formatMoney = function(c, d, t){
            var n = this, 
                c = isNaN(c = Math.abs(c)) ? 2 : c, 
                d = d == undefined ? "." : d, 
                t = t == undefined ? "," : t, 
                s = n < 0 ? "-" : "", 
                i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "", 
                j = (j = i.length) > 3 ? j % 3 : 0;
               return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
             };

        </script>

        <script src="https://js.pusher.com/2.2/pusher.min.js"></script>
        <script>
            // Enable pusher logging - don't include this in production

            (function(){
                if (!("Notification" in window)) {
                    console.log("This browser does not support desktop notification");
                } else if (Notification.permission === "granted") {
                    // If it's okay let's create a notification
                    
                  }

                  // Otherwise, we need to ask the user for permission
                  else if (Notification.permission !== 'denied') {
                    Notification.requestPermission(function (permission) {
                      // If the user accepts, let's create a notification
                      if (permission === "granted") {
                        
                      }
                    });
                  }
            }());

            Pusher.log = function(message) {
                if (window.console && window.console.log) {
                    window.console.log(message);
                }
            };

            var pusher = new Pusher('3400e69279ea78f5b712', {
                encrypted: true
            });
            var channel = pusher.subscribe('{{CLIENT}}');
            channel.bind('user_{{Auth::user()->id}}', function(data) {
                var title;
                switch(data.notification.type){
                    case "normal":
                        title = "Notification";
                        break;
                    case "reminder":
                        title = "Reminder";
                    case "urgent":
                        title = "Warning";
                }

                getNotificationButton(data.notification.type);

                spawnNotification(title, data.notification.text, data.notification.link);
            });
        </script>
        
    </body>
</html>